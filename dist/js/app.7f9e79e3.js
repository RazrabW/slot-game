(function(t){function e(e){for(var s,a,i=e[0],l=e[1],c=e[2],f=0,p=[];f<i.length;f++)a=i[f],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],s=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(s=!1)}s&&(o.splice(e--,1),t=a(a.s=r[0]))}return t}var s={},n={app:0},o=[];function a(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=s,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"56d7":function(t,e,r){"use strict";r.r(e);var s=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("p",{staticClass:"nes-container is-centered"},[t._v(" Ставка - "),r("span",{staticClass:"nes-text is-primary"},[t._v(t._s(t.form.rate))]),t._v(" Баланс - "),r("span",{staticClass:"nes-text is-primary"},[t._v(t._s(t.$store.state.money))])]),r("slot-machine",{attrs:{list:t.list,responsive:!0,trigger:t.trigger},on:{onComplete:t.onComplete}}),r("div",{staticClass:"control"},[r("button",{staticClass:"nes-btn is-primary",class:t.isActive,attrs:{type:"button"},on:{click:function(e){return t.start("less")}}},[t._v("<5 [x2]")]),r("button",{staticClass:"nes-btn is-primary",class:t.isActive,attrs:{type:"button"},on:{click:function(e){return t.start("equally")}}},[t._v("=5 [x10]")]),r("button",{staticClass:"nes-btn is-primary",class:t.isActive,attrs:{type:"button"},on:{click:function(e){return t.start("more")}}},[t._v(">5 [x2]")])]),r("button",{staticClass:"nes-btn is-success stat-btn",attrs:{type:"button"},on:{click:t.open_stat}},[t._v("Статистика")]),r("Modal",{ref:"rate",attrs:{id:"rate"}},[r("p",{staticClass:"title"},[t._v("Ставка")]),r("p",[t._v("Ваш баланс - "),r("span",{staticClass:"nes-text is-primary"},[t._v(t._s(t.$store.state.money))])]),r("div",{staticClass:"nes-field is-inline"},[r("label",{attrs:{for:"inline_field"}},[t._v("Ставка ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.rate,expression:"form.rate"}],staticClass:"nes-input",attrs:{type:"text",id:"inline_field",placeholder:"10"},domProps:{value:t.form.rate},on:{keyup:t.checkVatId,input:function(e){e.target.composing||t.$set(t.form,"rate",e.target.value)}}})]),t.form.vatError?r("p",{staticClass:"error"},[t._v(t._s(t.form.vatErrorMsg))]):t._e(),t.form.vatError?r("button",{staticClass:"nes-btn is-success",attrs:{type:"button"},on:{click:t.play}},[t._v("Играть!")]):t._e()]),r("Modal",{ref:"result"},[r("p",{staticClass:"title"},[t._v("Результат")]),r("p",[t._v("Итог - "+t._s())]),r("button",{staticClass:"nes-btn is-success",attrs:{type:"button"},on:{click:t.close_result}},[t._v("Сыграть ещё!")])]),r("Modal",{ref:"stat"},[r("p",{staticClass:"title"},[t._v("Статистика")]),r("p",[t._v("Побед - "+t._s(t.$store.state.win_count))]),r("p",[t._v("Поражений - "+t._s(t.$store.state.defeat_count))]),r("p"),r("button",{staticClass:"nes-btn is-success",attrs:{type:"button"},on:{click:t.close_stat}},[t._v("Закрыть")])])],1)},o=[],a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"window nes-dialog is-rounded"},[r("form",{staticClass:"dialog-form",attrs:{method:"dialog"}},[r("div",{staticClass:"nes-container dialog-form is-centered with-title"},[t._t("default")],2)])])},i=[],l={name:"Modal"},c=l,u=(r("5c1e"),r("2877")),f=Object(u["a"])(c,a,i,!1,null,"76c26a5f",null),p=f.exports,m=r("2f62");const d="gambling",h="data",_=1;let v;var b={async getDb(){return new Promise((t,e)=>{if(v)return t(v);const r=window.indexedDB.open(d,_);r.onerror=t=>{console.log("Error opening db",t),e("Error")},r.onsuccess=e=>{v=e.target.result,t(v)},r.onupgradeneeded=t=>{let e=t.target.result;e.createObjectStore(h,{autoIncrement:!0})}})},async load(){let t=await this.getDb();return new Promise(e=>{let r=t.transaction([h],"readwrite"),s=r.objectStore(h),n=s.get(1);n.onsuccess=t=>{let r=t.target.result;r?e(r):console.log("Not found")}})},async save(t){let e=await this.getDb();return new Promise(r=>{let s=e.transaction([h],"readwrite");s.oncomplete=()=>{r()},s.onerror=t=>{alert("Error storing note "+t.target.errorCode)};let n=s.objectStore(h);n.put(t,1)})},async clearStorage(){let t=await this.getDb();return new Promise(e=>{let r=t.transaction([h],"readwrite"),s=r.objectStore(h);s.clear(),e()})}},g={save:async function(t,e){return await b.save(t.state)},load:async function(t){await b.load().then(e=>{t.commit("setState",e)})}};s["a"].use(m["a"]);var y=new m["a"].Store({state:{money:100,win_count:0,defeat_count:0},mutations:{win:(t,e)=>{t.money+=e.coef*e.rate,t.win_count++},defeat:(t,e)=>{t.money-=e.rate,t.defeat_count++},setState:function(t,e){this.replaceState(e)}},actions:g,modules:{}}),w={name:"App",data(){return{list:[],trigger:!1,isActive:"",form:{rate:"",vatError:!1,vatErrorMsg:""},current_number:0,current_button:"",result_message:"",result_rate:0}},components:{Modal:p},methods:{open_stat:function(){this.$refs.stat.$el.style.display="block"},close_stat:function(){this.$refs.stat.$el.style.display="none"},close_rate:function(){this.$refs.rate.$el.style.display="none"},open_rate:function(){this.$refs.rate.$el.style.display="block"},play:function(){this.close_rate()},close_result:function(){this.$refs.result.$el.style.display="none",this.open_rate()},checkVatId(){var t=/^[1-9]\d*$/;""==this.form.rate?this.form.vatError=!1:t.test(this.form.rate)?this.form.rate<=y.state.money?this.form.vatError=!0:this.form.vatError=!1:(this.form.vatError=!1,console.log(1))},start(t){"is-disabled"!=this.isActive&&(this.trigger=!this.trigger,this.isActive="is-disabled",this.current_button=t)},onComplete(t){setTimeout(()=>{switch(this.current_number=t.text,this.current_button){case"less":this.current_number<5?(y.commit("win",{coef:2,rate:this.form.rate}),this.result_message="Поздравляем, вы виграли!",this.result_rate=2*this.form.rate,this.open_rate()):(y.commit("defeat",{rate:this.form.rate}),this.open_rate(),console.log("Поражение"));break;case"equally":5==this.current_number?(y.commit("win",{coef:5,rate:this.form.rate}),this.result_message="Поздравляем, вы виграли!",this.result_rate=5*this.form.rate,this.open_rate()):(y.commit("defeat",{rate:this.form.rate}),this.open_rate(),console.log("Поражение"));break;case"more":this.current_number>5?(y.commit("win",{coef:2,rate:this.form.rate}),this.result_message="Поздравляем, вы виграли!",this.result_rate=2*this.form.rate,this.open_rate()):(y.commit("defeat",{rate:this.form.rate}),this.open_rate(),console.log("Поражение"));break}this.isActive=""},1500)}},created:function(){while(this.list.length<11)this.list.push({text:this.list.length,color:"#B366FF"})},mounted:function(){y.dispatch("load")}};setInterval((function(){y.dispatch("save")}),100),window.onload=()=>{document.querySelector("#rate").style.display="block"};var C=w,x=(r("034f"),Object(u["a"])(C,n,o,!1,null,null,null)),$=x.exports,k=r("8c4f"),j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("slot-machine",{attrs:{list:t.list,trigger:t.trigger,height:300,width:300},on:{onComplete:t.onComplete}})},E=[],O={data(){return{list:[{text:"1",color:"#668CFF"},{text:"2",color:"#FF6666"},{text:"3",color:"#B366FF"}],trigger:null}},methods:{start(){this.trigger=new Date},onComplete(t){console.log(t)}}},S=O,P=Object(u["a"])(S,j,E,!1,null,null,null),M=P.exports;s["a"].use(k["a"]);const A=[{path:"/",name:"Home",component:M}],F=new k["a"]({routes:A});var D=F,I=r("a8b4");s["a"].config.productionTip=!1,s["a"].use(I["a"]),new s["a"]({router:D,store:y,render:function(t){return t($)}}).$mount("#app")},"5c1e":function(t,e,r){"use strict";r("9d00")},"85ec":function(t,e,r){},"9d00":function(t,e,r){}});
//# sourceMappingURL=app.7f9e79e3.js.map